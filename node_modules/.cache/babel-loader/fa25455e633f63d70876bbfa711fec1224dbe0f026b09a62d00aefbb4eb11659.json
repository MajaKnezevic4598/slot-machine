{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maja Knezevic\\\\Desktop\\\\s\\\\src\\\\components\\\\Slot.js\",\n  _s = $RefreshSig$();\nimport \"./Slot.scss\";\nimport IMAGES from \"../assets\";\nimport PlaySound from \"./PlaySound\";\nimport spin from \"../assets/spin.wav\";\nimport win from \"../assets/win.wav\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { losingCombination, settingSymbols, winningCombination, deltaAfterStopingAnimation, calculateScore } from \"../helperFunctions\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { betIncrement, betDecrement, resetGame, reduceCredit, gameScore } from \"../redux/game/gameActions\";\nimport { FaPlus } from \"react-icons/fa\";\nimport { FaMinus } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst slotSymbols = [{\n  src: IMAGES.seven,\n  value: 50,\n  id: 1\n}, {\n  src: IMAGES.cherry,\n  value: 30,\n  id: 2\n}, {\n  src: IMAGES.apple,\n  value: 20,\n  id: 3\n}, {\n  src: IMAGES.lemon,\n  value: 5,\n  id: 4\n}, {\n  src: IMAGES.orange,\n  value: 10,\n  id: 5\n}, {\n  src: IMAGES.bigwin,\n  value: 70,\n  id: 6\n}, {\n  src: IMAGES.plum,\n  value: 15,\n  id: 7\n}, {\n  src: IMAGES.grapes,\n  value: 25,\n  id: 8\n}, {\n  src: IMAGES.bluestar,\n  value: 35,\n  id: 9\n}];\nfunction initShuffleArray(arr) {\n  for (let i = 0; i < arr.length - 2; i++) {\n    const j = Math.floor(Math.random() * (arr.length - i) + i);\n    let current = arr[i];\n    let random = arr[j];\n    arr[j] = current;\n    arr[i] = random;\n  }\n  return [...arr];\n}\nfunction Slot() {\n  _s();\n  const NUMBER_OF_SYMBOLS = 18;\n  //number of symbols 9*2\n  const initialState = {\n    numberOfSymbols: NUMBER_OF_SYMBOLS,\n    reelsBottomPosition: 0,\n    symbolHeight: 0,\n    delta: 0\n  };\n  const [gameState, setGameState] = useState(initialState);\n  const [start, setStart] = useState(false);\n  const [count, setCount] = useState(0);\n  const [topConteinerPostition, setTopConteinerPosition] = useState();\n  const [bottomConteinerPosition, setBottomConteinerPostion] = useState();\n  const [score, setScore] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [winningSound, setWinningSound] = useState(false);\n\n  //visible vertical part of the array\n  const [visibleVertical1, setVisibleVertical1] = useState([]);\n  const [visibleVertical2, setVisibleVertical2] = useState([]);\n  const [visibleVertical3, setVisibleVertical3] = useState([]);\n  const [visibleVertical4, setVisibleVertical4] = useState([]);\n  const [visibleVertical5, setVisibleVertical5] = useState([]);\n  const conteinerRef = useRef(null);\n  const reelOneRef = useRef(null);\n  const reelOneRefs = useRef([]);\n  const reelTwoRefs = useRef([]);\n  const reelThreeRefs = useRef([]);\n  const reelFourRefs = useRef([]);\n  const reelFiveRefs = useRef([]);\n  const [reel1, setReel1] = useState([]);\n  const [reel2, setReel2] = useState([]);\n  const [reel3, setReel3] = useState([]);\n  const [reel4, setReel4] = useState([]);\n  const [reel5, setReel5] = useState([]);\n  const bet = useSelector(state => state.bet);\n  const amount = useSelector(state => state.amount);\n  const credit = useSelector(state => state.credit);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const arrayOfIndex = slotSymbols.map(item => item.id);\n    let arr1 = initShuffleArray(arrayOfIndex);\n    let arr2 = initShuffleArray(arrayOfIndex);\n    let arr3 = initShuffleArray(arrayOfIndex);\n    let arr4 = initShuffleArray(arrayOfIndex);\n    let arr5 = initShuffleArray(arrayOfIndex);\n    let lose = losingCombination(arr1, arr2, arr3, arr4, arr5);\n    arr1 = lose[0];\n    arr2 = lose[1];\n    arr3 = lose[2];\n    arr4 = lose[3];\n    arr5 = lose[4];\n    setReel1(settingSymbols(arr1, slotSymbols));\n    setReel2(settingSymbols(arr2, slotSymbols));\n    setReel3(settingSymbols(arr3, slotSymbols));\n    setReel4(settingSymbols(arr4, slotSymbols));\n    setReel5(settingSymbols(arr5, slotSymbols));\n  }, []);\n  const resetPos = () => {\n    setGameState(state => {\n      return {\n        ...state,\n        reelsBottomPosition: 0\n      };\n    });\n  };\n  let ID;\n  const moveReels = () => {\n    setGameState(state => {\n      return {\n        ...state,\n        reelsBottomPosition: state.reelsBottomPosition + state.delta\n      };\n    });\n    ID = requestAnimationFrame(moveReels);\n  };\n  useEffect(() => {\n    const setPositions = () => {\n      const symbolHeight = reelOneRef.current.children[0].offsetHeight;\n      const delta = symbolHeight / 4;\n      setGameState(prev => {\n        return {\n          ...prev,\n          symbolHeight,\n          delta\n        };\n      });\n    };\n    let id = setTimeout(() => {\n      setPositions();\n      setTopConteinerPosition(conteinerRef.current.getBoundingClientRect().top);\n      setBottomConteinerPostion(conteinerRef.current.getBoundingClientRect().bottom);\n    }, 1000);\n    return () => {\n      clearTimeout(id);\n    };\n  }, []);\n  useEffect(() => {\n    console.log(topConteinerPostition);\n    console.log(bottomConteinerPosition);\n  }, [topConteinerPostition, bottomConteinerPosition]);\n  useEffect(() => {\n    let timer;\n    if (start) {\n      setCount(prev => prev + 1);\n      setIsPlaying(true);\n      moveReels();\n      timer = setTimeout(() => {\n        cancelAnimationFrame(ID);\n        setStart(false);\n        setIsPlaying(false);\n      }, 4000);\n    }\n    return () => {\n      cancelAnimationFrame(ID);\n      clearTimeout(timer);\n    };\n  }, [start]);\n  useEffect(() => {\n    setScore(0);\n  }, [count]);\n  useEffect(() => {\n    let id;\n    if (start === false && reelOneRefs.length !== 0 && count !== 0) {\n      id = setTimeout(position, 500);\n    }\n    return () => {\n      clearTimeout(id);\n    };\n  }, [start, reelOneRefs]);\n\n  ///*********************************************** */\n  let position = () => {\n    let first = [];\n    let second = [];\n    let third = [];\n    let fourth = [];\n    let fifth = [];\n    reelOneRefs.current.forEach(item => {\n      if (item.getBoundingClientRect().top >= topConteinerPostition && item.getBoundingClientRect().bottom <= bottomConteinerPosition) {\n        first.push(item.id);\n      }\n      setVisibleVertical1(first);\n    });\n    reelTwoRefs.current.forEach(item => {\n      if (item.getBoundingClientRect().top >= topConteinerPostition && item.getBoundingClientRect().bottom <= bottomConteinerPosition) {\n        second.push(item.id);\n      }\n      setVisibleVertical2(second);\n    });\n    reelThreeRefs.current.forEach(item => {\n      if (item.getBoundingClientRect().top >= topConteinerPostition && item.getBoundingClientRect().bottom <= bottomConteinerPosition) {\n        third.push(item.id);\n      }\n      setVisibleVertical3(third);\n    });\n    reelFourRefs.current.forEach(item => {\n      if (item.getBoundingClientRect().top >= topConteinerPostition && item.getBoundingClientRect().bottom <= bottomConteinerPosition) {\n        fourth.push(item.id);\n      }\n      setVisibleVertical4(fourth);\n    });\n    reelFiveRefs.current.forEach(item => {\n      if (item.getBoundingClientRect().top >= topConteinerPostition && item.getBoundingClientRect().bottom <= bottomConteinerPosition) {\n        fifth.push(item.id);\n      }\n      setVisibleVertical5(fifth);\n    });\n  };\n\n  //********************************* */\n\n  function rowsOfColums(col1, col2, col3, col4, col5) {\n    let matrix = [[...col1], [...col2], [...col3], [...col4], [...col5]];\n    let row1 = matrix.map(item => item[0]);\n    let row2 = matrix.map(item => item[1]);\n    let row3 = matrix.map(item => item[2]);\n    let scorefromRow1 = calculateScore(row1);\n    let scoreFromRow2 = calculateScore(row2);\n    let scoreFromRow3 = calculateScore(row3);\n    let total = scorefromRow1 + scoreFromRow2 + scoreFromRow3;\n    let finallScore = total * bet;\n    setScore(finallScore);\n    dispatch(gameScore(finallScore));\n  }\n  useEffect(() => {\n    if (visibleVertical5.length !== 0) {\n      rowsOfColums(visibleVertical1, visibleVertical2, visibleVertical3, visibleVertical4, visibleVertical5);\n    }\n  }, [visibleVertical5]);\n  useEffect(() => {\n    if (start === false && count !== 0) {\n      let delta = deltaAfterStopingAnimation(gameState.reelsBottomPosition, gameState.symbolHeight);\n      if (delta === 0) return;\n      if (delta === gameState.symbolHeight / 4) {\n        setGameState(prev => {\n          return {\n            ...prev,\n            reelsBottomPosition: prev.reelsBottomPosition - delta\n          };\n        });\n      } else {\n        setGameState(prev => {\n          return {\n            ...prev,\n            reelsBottomPosition: prev.reelsBottomPosition + (prev.symbolHeight - delta)\n          };\n        });\n      }\n    }\n  }, [start]);\n  useEffect(() => {\n    if (count % 4 !== 0 || count === 0) {\n      const arrayOfIndex = slotSymbols.map(item => item.id);\n      let arr1 = initShuffleArray(arrayOfIndex);\n      let arr2 = initShuffleArray(arrayOfIndex);\n      let arr3 = initShuffleArray(arrayOfIndex);\n      let arr4 = initShuffleArray(arrayOfIndex);\n      let arr5 = initShuffleArray(arrayOfIndex);\n      let lose = losingCombination(arr1, arr2, arr3, arr4, arr5);\n      arr1 = lose[0];\n      arr2 = lose[1];\n      arr3 = lose[2];\n      arr4 = lose[3];\n      arr5 = lose[4];\n      setReel1(settingSymbols(arr1, slotSymbols));\n      setReel2(settingSymbols(arr2, slotSymbols));\n      setReel3(settingSymbols(arr3, slotSymbols));\n      setReel4(settingSymbols(arr4, slotSymbols));\n      setReel5(settingSymbols(arr5, slotSymbols));\n    }\n    if (count % 4 === 0 && count > 0) {\n      const arrayOfIndex = slotSymbols.map(item => item.id);\n      let win = winningCombination(arrayOfIndex, arrayOfIndex, arrayOfIndex, arrayOfIndex, arrayOfIndex);\n      let arr1 = win[0];\n      let arr2 = win[1];\n      let arr3 = win[2];\n      let arr4 = win[3];\n      let arr5 = win[4];\n      setReel1(settingSymbols(arr1, slotSymbols));\n      setReel2(settingSymbols(arr2, slotSymbols));\n      setReel3(settingSymbols(arr3, slotSymbols));\n      setReel4(settingSymbols(arr4, slotSymbols));\n      setReel5(settingSymbols(arr5, slotSymbols));\n    }\n  }, [count]);\n  const handleClick = () => {\n    setStart(true);\n    dispatch(reduceCredit());\n  };\n  useEffect(() => {\n    const restartPoint = NUMBER_OF_SYMBOLS / 2 * gameState.symbolHeight - gameState.symbolHeight / 4;\n    if (gameState.reelsBottomPosition >= restartPoint) {\n      resetPos();\n    }\n    console.log(gameState.reelsBottomPosition);\n  }, [gameState.reelsBottomPosition]);\n  useEffect(() => {\n    let id;\n    if (score !== 0 && isPlaying === false && count !== 0) {\n      setWinningSound(true);\n      id = setTimeout(() => {\n        setWinningSound(false);\n      }, 1000);\n    }\n    return () => {\n      clearTimeout(id);\n    };\n  }, [score]);\n  const disableButton = () => {\n    if (start === true) {\n      return true;\n    }\n    if (amount - credit * bet < 0) {\n      return true;\n    }\n  };\n  const disableButtonReset = () => {\n    if (amount === 0 && start === false) {\n      return false;\n    }\n    if (amount < credit && start === false) {\n      return false;\n    }\n    if (start === true) {\n      return true;\n    }\n    if (amount - credit * bet < 0) {\n      return true;\n    }\n  };\n  function mess() {\n    if (amount - credit * bet < 0 && amount >= credit &&\n    // amount !== credit - amount &&\n    amount !== 0 && count !== 0 && start === false) {\n      return \"you need to decrease you bet!\";\n    }\n    if (amount === 0 && start === false && count !== 0 && score === 0) {\n      return \" you have spent your points. resat and try againt!\";\n    }\n    if (score !== 0 && start === false && count !== 0) {\n      return `Your amount have increased for ${score} points`;\n    }\n    if (amount < credit && start === false) {\n      return \"you don`t have enough credit.reset and try again!\";\n    }\n    if (amount < credit && start === false) {\n      return `you dont have engough credit to play. restart the game`;\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"slot-conteiner\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gameResult\",\n      children: amount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"box\",\n      ref: conteinerRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slot-conteiner__interface\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column first\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reel one\",\n            ref: reelOneRef,\n            style: {\n              bottom: `-${gameState.reelsBottomPosition}px`\n            },\n            children: reel1.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: element => reelOneRefs.current[index] = element,\n                id: item.value,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.src,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column second\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reel two\",\n            style: {\n              bottom: `-${gameState.reelsBottomPosition}px`\n            },\n            children: reel2.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: element => reelTwoRefs.current[index] = element,\n                id: item.value,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.src,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column third\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reel three\",\n            style: {\n              bottom: `-${gameState.reelsBottomPosition}px`\n            },\n            children: reel3.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: element => reelThreeRefs.current[index] = element,\n                id: item.value,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.src,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column forth\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reel four\",\n            style: {\n              bottom: `-${gameState.reelsBottomPosition}px`\n            },\n            children: reel4.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: element => reelFourRefs.current[index] = element,\n                id: item.value,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.src,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column fifth\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reel five\",\n            style: {\n              bottom: `-${gameState.reelsBottomPosition}px`\n            },\n            children: reel5.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: element => reelFiveRefs.current[index] = element,\n                id: item.value,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.src,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"gameControlls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"set-bet\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"set-bet__decrement\",\n          onClick: () => {\n            dispatch(betDecrement());\n          },\n          children: /*#__PURE__*/_jsxDEV(FaMinus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"set-bet__bet\",\n          children: bet\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"set-bet__increment\",\n          onClick: () => {\n            dispatch(betIncrement());\n          },\n          children: /*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-start\",\n        onClick: handleClick,\n        disabled: disableButton(),\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-reset\",\n        onClick: () => dispatch(resetGame()),\n        disabled: disableButtonReset(),\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"message\",\n        children: mess()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlaySound, {\n      isPlaying: isPlaying,\n      url: spin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlaySound, {\n      isPlaying: isPlaying,\n      url: win\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 5\n  }, this);\n}\n_s(Slot, \"5fc1SBu7o8I0foVXLDAmrXCgVTY=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n_c = Slot;\nexport default Slot;\nvar _c;\n$RefreshReg$(_c, \"Slot\");","map":{"version":3,"names":["IMAGES","PlaySound","spin","win","v4","uuidv4","losingCombination","settingSymbols","winningCombination","deltaAfterStopingAnimation","calculateScore","React","useState","useRef","useEffect","useSelector","useDispatch","betIncrement","betDecrement","resetGame","reduceCredit","gameScore","FaPlus","FaMinus","slotSymbols","src","seven","value","id","cherry","apple","lemon","orange","bigwin","plum","grapes","bluestar","initShuffleArray","arr","i","length","j","Math","floor","random","current","Slot","NUMBER_OF_SYMBOLS","initialState","numberOfSymbols","reelsBottomPosition","symbolHeight","delta","gameState","setGameState","start","setStart","count","setCount","topConteinerPostition","setTopConteinerPosition","bottomConteinerPosition","setBottomConteinerPostion","score","setScore","isPlaying","setIsPlaying","winningSound","setWinningSound","visibleVertical1","setVisibleVertical1","visibleVertical2","setVisibleVertical2","visibleVertical3","setVisibleVertical3","visibleVertical4","setVisibleVertical4","visibleVertical5","setVisibleVertical5","conteinerRef","reelOneRef","reelOneRefs","reelTwoRefs","reelThreeRefs","reelFourRefs","reelFiveRefs","reel1","setReel1","reel2","setReel2","reel3","setReel3","reel4","setReel4","reel5","setReel5","bet","state","amount","credit","dispatch","arrayOfIndex","map","item","arr1","arr2","arr3","arr4","arr5","lose","resetPos","ID","moveReels","requestAnimationFrame","setPositions","children","offsetHeight","prev","setTimeout","getBoundingClientRect","top","bottom","clearTimeout","console","log","timer","cancelAnimationFrame","position","first","second","third","fourth","fifth","forEach","push","rowsOfColums","col1","col2","col3","col4","col5","matrix","row1","row2","row3","scorefromRow1","scoreFromRow2","scoreFromRow3","total","finallScore","handleClick","restartPoint","disableButton","disableButtonReset","mess","index","element"],"sources":["C:/Users/Maja Knezevic/Desktop/s/src/components/Slot.js"],"sourcesContent":["import \"./Slot.scss\";\nimport IMAGES from \"../assets\";\nimport PlaySound from \"./PlaySound\";\nimport spin from \"../assets/spin.wav\";\nimport win from \"../assets/win.wav\";\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport {\n  losingCombination,\n  settingSymbols,\n  winningCombination,\n  deltaAfterStopingAnimation,\n  calculateScore,\n} from \"../helperFunctions\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  betIncrement,\n  betDecrement,\n  resetGame,\n  reduceCredit,\n  gameScore,\n} from \"../redux/game/gameActions\";\n\nimport { FaPlus } from \"react-icons/fa\";\nimport { FaMinus } from \"react-icons/fa\";\n\nconst slotSymbols = [\n  { src: IMAGES.seven, value: 50, id: 1 },\n  { src: IMAGES.cherry, value: 30, id: 2 },\n  { src: IMAGES.apple, value: 20, id: 3 },\n  { src: IMAGES.lemon, value: 5, id: 4 },\n  { src: IMAGES.orange, value: 10, id: 5 },\n  { src: IMAGES.bigwin, value: 70, id: 6 },\n  { src: IMAGES.plum, value: 15, id: 7 },\n  { src: IMAGES.grapes, value: 25, id: 8 },\n  { src: IMAGES.bluestar, value: 35, id: 9 },\n];\n\nfunction initShuffleArray(arr) {\n  for (let i = 0; i < arr.length - 2; i++) {\n    const j = Math.floor(Math.random() * (arr.length - i) + i);\n    let current = arr[i];\n    let random = arr[j];\n    arr[j] = current;\n    arr[i] = random;\n  }\n  return [...arr];\n}\n\nfunction Slot() {\n  const NUMBER_OF_SYMBOLS = 18;\n  //number of symbols 9*2\n  const initialState = {\n    numberOfSymbols: NUMBER_OF_SYMBOLS,\n    reelsBottomPosition: 0,\n    symbolHeight: 0,\n    delta: 0,\n  };\n\n  const [gameState, setGameState] = useState(initialState);\n  const [start, setStart] = useState(false);\n  const [count, setCount] = useState(0);\n  const [topConteinerPostition, setTopConteinerPosition] = useState();\n  const [bottomConteinerPosition, setBottomConteinerPostion] = useState();\n  const [score, setScore] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [winningSound, setWinningSound] = useState(false);\n\n  //visible vertical part of the array\n  const [visibleVertical1, setVisibleVertical1] = useState([]);\n  const [visibleVertical2, setVisibleVertical2] = useState([]);\n  const [visibleVertical3, setVisibleVertical3] = useState([]);\n  const [visibleVertical4, setVisibleVertical4] = useState([]);\n  const [visibleVertical5, setVisibleVertical5] = useState([]);\n\n  const conteinerRef = useRef(null);\n  const reelOneRef = useRef(null);\n  const reelOneRefs = useRef([]);\n  const reelTwoRefs = useRef([]);\n  const reelThreeRefs = useRef([]);\n  const reelFourRefs = useRef([]);\n  const reelFiveRefs = useRef([]);\n\n  const [reel1, setReel1] = useState([]);\n  const [reel2, setReel2] = useState([]);\n  const [reel3, setReel3] = useState([]);\n  const [reel4, setReel4] = useState([]);\n  const [reel5, setReel5] = useState([]);\n\n  const bet = useSelector((state) => state.bet);\n  const amount = useSelector((state) => state.amount);\n  const credit = useSelector((state) => state.credit);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const arrayOfIndex = slotSymbols.map((item) => item.id);\n    let arr1 = initShuffleArray(arrayOfIndex);\n    let arr2 = initShuffleArray(arrayOfIndex);\n    let arr3 = initShuffleArray(arrayOfIndex);\n    let arr4 = initShuffleArray(arrayOfIndex);\n    let arr5 = initShuffleArray(arrayOfIndex);\n    let lose = losingCombination(arr1, arr2, arr3, arr4, arr5);\n\n    arr1 = lose[0];\n    arr2 = lose[1];\n    arr3 = lose[2];\n    arr4 = lose[3];\n    arr5 = lose[4];\n    setReel1(settingSymbols(arr1, slotSymbols));\n    setReel2(settingSymbols(arr2, slotSymbols));\n    setReel3(settingSymbols(arr3, slotSymbols));\n    setReel4(settingSymbols(arr4, slotSymbols));\n    setReel5(settingSymbols(arr5, slotSymbols));\n  }, []);\n\n  const resetPos = () => {\n    setGameState((state) => {\n      return {\n        ...state,\n        reelsBottomPosition: 0,\n      };\n    });\n  };\n\n  let ID;\n  const moveReels = () => {\n    setGameState((state) => {\n      return {\n        ...state,\n        reelsBottomPosition: state.reelsBottomPosition + state.delta,\n      };\n    });\n    ID = requestAnimationFrame(moveReels);\n  };\n\n  useEffect(() => {\n    const setPositions = () => {\n      const symbolHeight = reelOneRef.current.children[0].offsetHeight;\n\n      const delta = symbolHeight / 4;\n\n      setGameState((prev) => {\n        return { ...prev, symbolHeight, delta };\n      });\n    };\n    let id = setTimeout(() => {\n      setPositions();\n      setTopConteinerPosition(conteinerRef.current.getBoundingClientRect().top);\n      setBottomConteinerPostion(\n        conteinerRef.current.getBoundingClientRect().bottom\n      );\n    }, 1000);\n    return () => {\n      clearTimeout(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log(topConteinerPostition);\n    console.log(bottomConteinerPosition);\n  }, [topConteinerPostition, bottomConteinerPosition]);\n\n  useEffect(() => {\n    let timer;\n    if (start) {\n      setCount((prev) => prev + 1);\n      setIsPlaying(true);\n      moveReels();\n      timer = setTimeout(() => {\n        cancelAnimationFrame(ID);\n        setStart(false);\n        setIsPlaying(false);\n      }, 4000);\n    }\n\n    return () => {\n      cancelAnimationFrame(ID);\n      clearTimeout(timer);\n    };\n  }, [start]);\n\n  useEffect(() => {\n    setScore(0);\n  }, [count]);\n\n  useEffect(() => {\n    let id;\n    if (start === false && reelOneRefs.length !== 0 && count !== 0) {\n      id = setTimeout(position, 500);\n    }\n    return () => {\n      clearTimeout(id);\n    };\n  }, [start, reelOneRefs]);\n\n  ///*********************************************** */\n  let position = () => {\n    let first = [];\n    let second = [];\n    let third = [];\n    let fourth = [];\n    let fifth = [];\n\n    reelOneRefs.current.forEach((item) => {\n      if (\n        item.getBoundingClientRect().top >= topConteinerPostition &&\n        item.getBoundingClientRect().bottom <= bottomConteinerPosition\n      ) {\n        first.push(item.id);\n      }\n      setVisibleVertical1(first);\n    });\n    reelTwoRefs.current.forEach((item) => {\n      if (\n        item.getBoundingClientRect().top >= topConteinerPostition &&\n        item.getBoundingClientRect().bottom <= bottomConteinerPosition\n      ) {\n        second.push(item.id);\n      }\n      setVisibleVertical2(second);\n    });\n    reelThreeRefs.current.forEach((item) => {\n      if (\n        item.getBoundingClientRect().top >= topConteinerPostition &&\n        item.getBoundingClientRect().bottom <= bottomConteinerPosition\n      ) {\n        third.push(item.id);\n      }\n      setVisibleVertical3(third);\n    });\n\n    reelFourRefs.current.forEach((item) => {\n      if (\n        item.getBoundingClientRect().top >= topConteinerPostition &&\n        item.getBoundingClientRect().bottom <= bottomConteinerPosition\n      ) {\n        fourth.push(item.id);\n      }\n      setVisibleVertical4(fourth);\n    });\n\n    reelFiveRefs.current.forEach((item) => {\n      if (\n        item.getBoundingClientRect().top >= topConteinerPostition &&\n        item.getBoundingClientRect().bottom <= bottomConteinerPosition\n      ) {\n        fifth.push(item.id);\n      }\n      setVisibleVertical5(fifth);\n    });\n  };\n\n  //********************************* */\n\n  function rowsOfColums(col1, col2, col3, col4, col5) {\n    let matrix = [[...col1], [...col2], [...col3], [...col4], [...col5]];\n\n    let row1 = matrix.map((item) => item[0]);\n    let row2 = matrix.map((item) => item[1]);\n    let row3 = matrix.map((item) => item[2]);\n\n    let scorefromRow1 = calculateScore(row1);\n    let scoreFromRow2 = calculateScore(row2);\n    let scoreFromRow3 = calculateScore(row3);\n    let total = scorefromRow1 + scoreFromRow2 + scoreFromRow3;\n    let finallScore = total * bet;\n    setScore(finallScore);\n    dispatch(gameScore(finallScore));\n  }\n\n  useEffect(() => {\n    if (visibleVertical5.length !== 0) {\n      rowsOfColums(\n        visibleVertical1,\n        visibleVertical2,\n        visibleVertical3,\n        visibleVertical4,\n        visibleVertical5\n      );\n    }\n  }, [visibleVertical5]);\n\n  useEffect(() => {\n    if (start === false && count !== 0) {\n      let delta = deltaAfterStopingAnimation(\n        gameState.reelsBottomPosition,\n        gameState.symbolHeight\n      );\n\n      if (delta === 0) return;\n      if (delta === gameState.symbolHeight / 4) {\n        setGameState((prev) => {\n          return {\n            ...prev,\n            reelsBottomPosition: prev.reelsBottomPosition - delta,\n          };\n        });\n      } else {\n        setGameState((prev) => {\n          return {\n            ...prev,\n            reelsBottomPosition:\n              prev.reelsBottomPosition + (prev.symbolHeight - delta),\n          };\n        });\n      }\n    }\n  }, [start]);\n\n  useEffect(() => {\n    if (count % 4 !== 0 || count === 0) {\n      const arrayOfIndex = slotSymbols.map((item) => item.id);\n      let arr1 = initShuffleArray(arrayOfIndex);\n      let arr2 = initShuffleArray(arrayOfIndex);\n      let arr3 = initShuffleArray(arrayOfIndex);\n      let arr4 = initShuffleArray(arrayOfIndex);\n      let arr5 = initShuffleArray(arrayOfIndex);\n      let lose = losingCombination(arr1, arr2, arr3, arr4, arr5);\n\n      arr1 = lose[0];\n      arr2 = lose[1];\n      arr3 = lose[2];\n      arr4 = lose[3];\n      arr5 = lose[4];\n      setReel1(settingSymbols(arr1, slotSymbols));\n      setReel2(settingSymbols(arr2, slotSymbols));\n      setReel3(settingSymbols(arr3, slotSymbols));\n      setReel4(settingSymbols(arr4, slotSymbols));\n      setReel5(settingSymbols(arr5, slotSymbols));\n    }\n    if (count % 4 === 0 && count > 0) {\n      const arrayOfIndex = slotSymbols.map((item) => item.id);\n\n      let win = winningCombination(\n        arrayOfIndex,\n        arrayOfIndex,\n        arrayOfIndex,\n        arrayOfIndex,\n        arrayOfIndex\n      );\n\n      let arr1 = win[0];\n      let arr2 = win[1];\n      let arr3 = win[2];\n      let arr4 = win[3];\n      let arr5 = win[4];\n      setReel1(settingSymbols(arr1, slotSymbols));\n      setReel2(settingSymbols(arr2, slotSymbols));\n      setReel3(settingSymbols(arr3, slotSymbols));\n      setReel4(settingSymbols(arr4, slotSymbols));\n      setReel5(settingSymbols(arr5, slotSymbols));\n    }\n  }, [count]);\n\n  const handleClick = () => {\n    setStart(true);\n    dispatch(reduceCredit());\n  };\n\n  useEffect(() => {\n    const restartPoint =\n      (NUMBER_OF_SYMBOLS / 2) * gameState.symbolHeight -\n      gameState.symbolHeight / 4;\n\n    if (gameState.reelsBottomPosition >= restartPoint) {\n      resetPos();\n    }\n    console.log(gameState.reelsBottomPosition);\n  }, [gameState.reelsBottomPosition]);\n\n  useEffect(() => {\n    let id;\n    if (score !== 0 && isPlaying === false && count !== 0) {\n      setWinningSound(true);\n      id = setTimeout(() => {\n        setWinningSound(false);\n      }, 1000);\n    }\n\n    return () => {\n      clearTimeout(id);\n    };\n  }, [score]);\n\n  const disableButton = () => {\n    if (start === true) {\n      return true;\n    }\n\n    if (amount - credit * bet < 0) {\n      return true;\n    }\n  };\n\n  const disableButtonReset = () => {\n    if (amount === 0 && start === false) {\n      return false;\n    }\n    if (amount < credit && start === false) {\n      return false;\n    }\n    if (start === true) {\n      return true;\n    }\n    if (amount - credit * bet < 0) {\n      return true;\n    }\n  };\n\n  function mess() {\n    if (\n      amount - credit * bet < 0 &&\n      amount >= credit &&\n      // amount !== credit - amount &&\n      amount !== 0 &&\n      count !== 0 &&\n      start === false\n    ) {\n      return \"you need to decrease you bet!\";\n    }\n    if (amount === 0 && start === false && count !== 0 && score === 0) {\n      return \" you have spent your points. resat and try againt!\";\n    }\n    if (score !== 0 && start === false && count !== 0) {\n      return `Your amount have increased for ${score} points`;\n    }\n    if (amount < credit && start === false) {\n      return \"you don`t have enough credit.reset and try again!\";\n    }\n    if (amount < credit && start === false) {\n      return `you dont have engough credit to play. restart the game`;\n    }\n  }\n\n  return (\n    <div className=\"slot-conteiner\">\n      <div className=\"gameResult\">{amount}</div>\n      <section className=\"box\" ref={conteinerRef}>\n        <div className=\"slot-conteiner__interface\">\n          <div className=\"column first\">\n            <div\n              className=\"reel one\"\n              ref={reelOneRef}\n              style={{\n                bottom: `-${gameState.reelsBottomPosition}px`,\n              }}\n            >\n              {reel1.map((item, index) => {\n                return (\n                  <div\n                    key={uuidv4()}\n                    ref={(element) => (reelOneRefs.current[index] = element)}\n                    id={item.value}\n                  >\n                    <img src={item.src} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"column second\">\n            <div\n              className=\"reel two\"\n              style={{\n                bottom: `-${gameState.reelsBottomPosition}px`,\n              }}\n            >\n              {reel2.map((item, index) => {\n                return (\n                  <div\n                    key={uuidv4()}\n                    ref={(element) => (reelTwoRefs.current[index] = element)}\n                    id={item.value}\n                  >\n                    <img src={item.src} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"column third\">\n            <div\n              className=\"reel three\"\n              style={{\n                bottom: `-${gameState.reelsBottomPosition}px`,\n              }}\n            >\n              {reel3.map((item, index) => {\n                return (\n                  <div\n                    key={uuidv4()}\n                    ref={(element) => (reelThreeRefs.current[index] = element)}\n                    id={item.value}\n                  >\n                    <img src={item.src} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"column forth\">\n            <div\n              className=\"reel four\"\n              style={{\n                bottom: `-${gameState.reelsBottomPosition}px`,\n              }}\n            >\n              {reel4.map((item, index) => {\n                return (\n                  <div\n                    key={uuidv4()}\n                    ref={(element) => (reelFourRefs.current[index] = element)}\n                    id={item.value}\n                  >\n                    <img src={item.src} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"column fifth\">\n            <div\n              className=\"reel five\"\n              style={{\n                bottom: `-${gameState.reelsBottomPosition}px`,\n              }}\n            >\n              {reel5.map((item, index) => {\n                return (\n                  <div\n                    key={uuidv4()}\n                    ref={(element) => (reelFiveRefs.current[index] = element)}\n                    id={item.value}\n                  >\n                    <img src={item.src} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"gameControlls\">\n        <div className=\"set-bet\">\n          <button\n            className=\"set-bet__decrement\"\n            onClick={() => {\n              dispatch(betDecrement());\n            }}\n          >\n            <FaMinus />\n          </button>\n          <div className=\"set-bet__bet\">{bet}</div>\n          <button\n            className=\"set-bet__increment\"\n            onClick={() => {\n              dispatch(betIncrement());\n            }}\n          >\n            <FaPlus />\n          </button>\n        </div>\n        <button\n          className=\"btn-start\"\n          onClick={handleClick}\n          disabled={disableButton()}\n        >\n          Start\n        </button>\n        <button\n          className=\"btn-reset\"\n          onClick={() => dispatch(resetGame())}\n          disabled={disableButtonReset()}\n        >\n          Reset\n        </button>\n      </section>\n      <section>\n        <p className=\"message\">{mess()}</p>\n      </section>\n      <PlaySound isPlaying={isPlaying} url={spin} />\n      <PlaySound isPlaying={isPlaying} url={win} />\n    </div>\n  );\n}\n\nexport default Slot;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}